{"remainingRequest":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/src/components/sideMenu/folder.vue?vue&type=style&index=0&id=78ed53e7&scoped=true&lang=css&","dependencies":[{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/src/components/sideMenu/folder.vue","mtime":1608982296787},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alihassan/The_LOL/Projects/collage_related/SecondYear/programming2/mail-server-web/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmN1c3RvbS1mb2xkZXJ7CiAgdXNlci1zZWxlY3Q6IG5vbmU7CglkaXNwbGF5OiBmbGV4OwoJanVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OwoJYWxpZ24taXRlbXM6IGNlbnRlcjsKCWhlaWdodDogMnJlbTsKCXdpZHRoOiAxMDAlOwoJcGFkZGluZy1sZWZ0OiAzcmVtOwp9Ci5jdXN0b20tZm9sZGVyOmhvdmVyewoJYmFja2dyb3VuZC1jb2xvcjogcmdiKDIyNCwgMjI0LCAyMjQpOwp9CgouYWN0aW9ucy1idG57CiAgd2lkdGg6IDEuNXJlbTsKICBoZWlnaHQ6IDEuNXJlbTsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9Ci5hY3Rpb25zLWJ0bjpob3ZlcnsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjExLCAyMTAsIDIxMCk7Cn0KCi5kaXNhYmxlZHsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQouZW5hYmxlZHsKICBwb2ludGVyLWV2ZW50czogYWxsOwp9CgoKLmZvbGRlci1uYW1lewogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYm9yZGVyOiBub25lOwogIGhlaWdodDogMS41cmVtOwogIG1hcmdpbi1sZWZ0OiAxcmVtOwogIHdpZHRoOiA1MCU7CiAgZm9udC1zaXplOiBtZWRpdW07CiAgY29sb3I6ICM3Njc2NzY7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5mb2xkZXItbmFtZS1lZGl0ZWR7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBib3JkZXI6IDFweCBzb2xpZCAjNzY3Njc2OwogIGhlaWdodDogMS41cmVtOwogIG1hcmdpbi1sZWZ0OiAxcmVtOwogIHdpZHRoOiA1MCU7CiAgZm9udC1zaXplOiBtZWRpdW07CiAgY29sb3I6ICM3Njc2NzY7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCmlucHV0W3R5cGU9dGV4dF06Zm9jdXN7CiAgb3V0bGluZS1zdHlsZTogbm9uZTsKICBib3JkZXI6IDFweCBzb2xpZCAjNzY3Njc2Owp9CgouYWN0aW9ucy1tZW51ewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBtYXJnaW4tdG9wOiA1cmVtOwogIHdpZHRoOiA1MCU7CiAgaGVpZ2h0OiA0cmVtOwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogIHotaW5kZXg6IDI7CiAgYm94LXNoYWRvdzogM3B4IDRweCA1cHggMXB4IHJnYigyMjQsIDIyNCwgMjI0KTsKfQoKLm1lbnUtaXRlbXsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDJyZW07CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYigyMjQsIDIyNCwgMjI0KTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICBsaW5lLWhlaWdodDogMnJlbTsKfQoubWVudS1pdGVtOmhvdmVyewogIGJhY2tncm91bmQtY29sb3I6IHJnYigyMjQsIDIyNCwgMjI0KTsKfQoKLnZpc2libGV7CiAgdmlzaWJpbGl0eTogdmlzaWJsZTsKICBkaXNwbGF5OiBmbGV4Owp9Ci5pY29uLXZpaXNibGV7CiAgdmlzaWJpbGl0eTogdmlzaWJsZTsKfQouaGlkZGVuewogIHZpc2liaWxpdHk6IGhpZGRlbjsKICBkaXNwbGF5OiBub25lOwp9Ci5pY29uLWhpZGRlbnsKICB2aXNpYmlsaXR5OiBoaWRkZW47Cn0KCi5mb2N1c2VkewogIGJhY2tncm91bmQtY29sb3I6IHJnYigyMDksIDIwNiwgMjA2KTsKfQoudW5mb2N1c2VkewogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwp9CgouYm9sZHsKICBmb250LXdlaWdodDogYm9sZDsKfQoubm9ybWFsewogIGZvbnQtd2VpZ2h0OiBub3JtYWw7Cn0K"},{"version":3,"sources":["folder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"folder.vue","sourceRoot":"src/components/sideMenu","sourcesContent":["<template>\n  <div  :id=\"folderId\" :class=\"['custom-folder', (focused && set) ? 'focused': 'unfocused']\" \n        @mouseover=\"mouseOn = true\" \n        @mouseleave=\"mouseOn = false\"\n        @click=\"showEmails()\">\n    <div  :class=\"['actions-btn', enabledActionsMenu ? 'enabled' : 'disabled', mouseOn ? 'icon-visible': 'icon-hidden']\"\n          @click=\"toggleActionsMenu()\">\n      <img src=\"../../assets/sideMenu/actions.png\" width=\"16px\">\n    </div>\n    <input  type=\"text\" :id=\"`folder-name-${folderId}`\" \n            :class=\"['folder-name', focused&&set ? 'bold': 'normal']\"  @keyup.enter=\"setFolderName()\" \n            :disabled=\"!isBeingEdited\" maxlength=\"13\" v-model=\"folderName\">\n    <div :class=\"['actions-menu', actionsMenuVisible ? 'visible': 'hidden']\" >\n      <div class=\"menu-item\" @click=\"changeFolderName()\">rename</div>\n      <div class=\"menu-item\" @click=\"deleteFolder()\">delete</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport store from \"../../store\";\n\nexport default {\n  name: \"customFolder\",\n  props: {\n    existingFolderName: String,\n    customFolderNumber: Number,\n  },\n  data(){\n    return{\n      folderId: \"new-custom-folder\",\n      set: false,\n      folderName: \"New folder\",\n      mouseOn: false,\n      enabledActionsMenu: false,\n      isBeingEdited: false,\n      actionsMenuVisible: false,\n      focused: false,\n\n      rename: false,\n      oldFolderName: \"\",\n    }\n  },\n  methods:{\n    setFolderName(){\n      if(this.rename){\n        this.setFolderNameAfterRenaming();\n        this.rename = false;\n      }\n      else{\n        this.setNewFolderName();\n      }\n      this.enabledActionsMenu = true;\n      const folderNameInput = document.getElementById(`folder-name-${this.folderId}`);\n      folderNameInput.className = \"folder-name\";\n    },\n    setNewFolderName(){\n      axios.get(`http://localhost:8080//createNewCustomFolder`,\n      {\n        params: { \n          userId: store.getters.getUserId,\n          folderName: this.folderName.toLowerCase(),\n        }\n      })\n      .then( response => {\n        const canBeCreated = response.data;\n        if(canBeCreated){\n          this.folderId = this.folderName.toLowerCase();\n          this.isBeingEdited = false;\n          this.set = true;\n        }\n        else{\n          //show error msg\n          this.removeFolder();\n        }\n      })\n      .catch( error => console.log(error)); \n    },\n    setFolderNameAfterRenaming(){\n      axios.get(`http://localhost:8080//renameCustomFolder`,\n      {\n        params: { \n          userId: store.getters.getUserId,\n          oldFolderName: this.oldFolderName.toLowerCase(),\n          newFolderName: this.folderName.toLowerCase(),\n        }\n      })\n      .then( response => {\n        const canBeRenamed = response.data;\n        if(!canBeRenamed){\n          this.folderName = this.oldFolderName;\n          //show error msg\n        }\n        this.folderId = this.folderName.toLowerCase();\n        this.isBeingEdited = false;\n        this.set = true;\n      })\n      .catch( error => console.log(error)); \n    },\n    deleteFolder(){\n      this.actionsMenuVisible = false;\n\n      const popUpBackground = document.createElement('div');\n      popUpBackground.className = 'pop-up-background';\n      document.body.appendChild(popUpBackground);\n\n      const popUp = document.createElement('div');\n      popUp.className = 'pop-up';\n      popUpBackground.appendChild(popUp);\n\n      const msg = document.createElement('h2');\n      msg.innerText = \"sure to delete this folder?\";\n      popUp.appendChild(msg);\n\n      const cancelBtn = document.createElement('span');\n      cancelBtn.innerText = 'Cancel';\n      cancelBtn.className = 'pop-up-close-button cancel-btn';\n\n      const confrimBtn = document.createElement('span');\n      confrimBtn.innerText = 'Confirm';\n      confrimBtn.className = 'pop-up-close-button confrim-btn';   \n\n      cancelBtn.onclick = () => {    \n        document.body.removeChild(popUpBackground); \n      }\n\n      confrimBtn.onclick = () => {\n        axios.delete(`http://localhost:8080//deleteCustomFolder`,\n        {\n          params: { \n            userId: store.getters.getUserId,\n            folderName: this.folderName.toLowerCase(),\n          }\n        })\n        .then( () => this.removeFolder())\n        .catch( error => console.log(error)); \n        document.body.removeChild(popUpBackground); \n      }\n\n      popUp.appendChild(cancelBtn);\n      popUp.appendChild(confrimBtn);\n    },\n    changeFolderName(){\n      this.oldFolderName = this.folderName;\n      this.actionsMenuVisible = false;\n      const folderNameInput = document.getElementById(`folder-name-${this.folderId}`);\n      this.isBeingEdited = true;\n      this.rename = true;\n      folderNameInput.focus();\n      folderNameInput.className = \"folder-name-edited\";\n      store.commit('setCustomFolderEdited', this);\n    },\n    removeFolder(){\n      store.commit('removeCustomFolder', this);\n      document.getElementById(this.folderId).remove();\n    },\n    toggleActionsMenu(){\n      const folderNameInput = document.getElementById(`folder-name-${this.folderId}`);\n      folderNameInput.disabled = true;\n      this.actionsMenuVisible = !this.actionsMenuVisible;\n    },\n    showEmails(){\n      if(!this.set || this.isBeingEdited) return;\n      let itemClicked = event.target;\n      if(itemClicked.id !== this.folderId && itemClicked.id !== `folder-name-${this.folderId}`) return;\n      for(const folderBtn of store.getters.getCustomFoldersInfo.allcustomFolders){\n        folderBtn.focused = false;\n        folderBtn.actionsMenuVisible = false;\n      }\n      this.focused = !this.focused;\n      this.getEmails();\n    },\n    getEmails(){\n      store.dispatch('setActiveFolder', this.folderName.toLowerCase())\n      store.commit('setStartIndex', 0);\n      const homePage = store.getters.getHomePage;\n      axios.get(`http://localhost:8080//getEmailsList`, {\n        params: { \n          userId: store.getters.getUserId,\n          folderName: this.folderName.toLowerCase(),\n          sortType: 1,\n          sortIdntifier: 0,\n          start: 0,\n        }\n      })\n      .then( response => {\n        homePage.reset();\n        homePage.addEmails(response.data);\n        store.commit('setEmailsList', response.data);\n      })\n      .catch( error => console.log(error)); \n    }\n  },\n  mounted(){\n    if(this.existingFolderName !== null){\n      this.folderId = this.existingFolderName;\n      this.folderName = this.existingFolderName;\n      this.enabledActionsMenu = true;\n      this.set = true;\n    }\n    else {\n      this.folderName += this.customFolderNumber;\n      this.isBeingEdited = true; \n      this.enabledActionsMenu = false;\n      this.mouseOn = true;\n      store.commit('setCustomFolderEdited', this);\n    }\n    document.onclick = () => {\n      const currentCustomFolder = store.getters.getCustomFoldersInfo.beingEdited;\n      if(currentCustomFolder === null) return;\n      if(currentCustomFolder.mouseOn || !currentCustomFolder.isBeingEdited) {\n        return;\n      }\n      console.log(\"set\");\n      currentCustomFolder.setFolderName();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.custom-folder{\n  user-select: none;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\theight: 2rem;\n\twidth: 100%;\n\tpadding-left: 3rem;\n}\n.custom-folder:hover{\n\tbackground-color: rgb(224, 224, 224);\n}\n\n.actions-btn{\n  width: 1.5rem;\n  height: 1.5rem;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.actions-btn:hover{\n  background-color: rgb(211, 210, 210);\n}\n\n.disabled{\n  pointer-events: none;\n}\n.enabled{\n  pointer-events: all;\n}\n\n\n.folder-name{\n  box-sizing: border-box;\n  border: none;\n  height: 1.5rem;\n  margin-left: 1rem;\n  width: 50%;\n  font-size: medium;\n  color: #767676;\n  background-color: transparent;\n}\n\n.folder-name-edited{\n  box-sizing: border-box;\n  border: 1px solid #767676;\n  height: 1.5rem;\n  margin-left: 1rem;\n  width: 50%;\n  font-size: medium;\n  color: #767676;\n  background-color: transparent;\n}\n\ninput[type=text]:focus{\n  outline-style: none;\n  border: 1px solid #767676;\n}\n\n.actions-menu{\n  position: absolute;\n  margin-top: 5rem;\n  width: 50%;\n  height: 4rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: white;\n  z-index: 2;\n  box-shadow: 3px 4px 5px 1px rgb(224, 224, 224);\n}\n\n.menu-item{\n  width: 100%;\n  height: 2rem;\n  border-bottom: 1px solid rgb(224, 224, 224);\n  text-align: center;\n  vertical-align: middle;\n  line-height: 2rem;\n}\n.menu-item:hover{\n  background-color: rgb(224, 224, 224);\n}\n\n.visible{\n  visibility: visible;\n  display: flex;\n}\n.icon-viisble{\n  visibility: visible;\n}\n.hidden{\n  visibility: hidden;\n  display: none;\n}\n.icon-hidden{\n  visibility: hidden;\n}\n\n.focused{\n  background-color: rgb(209, 206, 206);\n}\n.unfocused{\n  background-color: white;\n}\n\n.bold{\n  font-weight: bold;\n}\n.normal{\n  font-weight: normal;\n}\n</style>"]}]}